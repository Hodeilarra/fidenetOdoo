<?xml version="1.0"?>
<odoo>
    <data>
        <record id="project_custom_probc_view_task_form" model="ir.ui.view">
            <field name="name">project.task.from.inherited.probc</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_form2"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="presupuesto"/>
                    <field name="notas" widget="text" groups="project.group_project_manager"/>
                </xpath>
                <xpath expr="//field[@name='date_assign']" position="after">
                    <field name="fecha_creacion"/>
                </xpath>
                <xpath expr="//page[@name='extra_info']//group" position='inside'>
                    <group string='Detalles de factura'>
                        <field name='custom_inv_journal_id'/>
                        <field name='custom_inv_user_id'/>
                    </group>
                </xpath>
                <xpath expr="//header" position="inside">
                    <button class="oe_highlight"
                            type="object" 
                            name="action_create_sale" 
                            string="Crear Proforma" 
                        />
                </xpath>
                <xpath expr="//page[@name='extra_info']" position="before">
                    <page name="invoice_line" string="Mediciones" >
                        <field name="custom_invoice_line_ids" widget="section_and_note_one2many">
                            <tree editable="bottom" delete="true">
                                <field name='sequence' widget='handle'/>
                                <control>
                                    <create name="add_line_control" string="Añadir producto"/>
                                    <create name="add_section_control" string="Añadir seccion" context="{'default_display_type': 'line_section'}"/>
                                    <create name="add_note_control" string="Añadir nota" context="{'default_display_type': 'line_note'}"/>
                                </control>
                                <field name="display_type" invisible="1"/>
                                <field name="product_id" attrs="{'required': [('display_type', '=', False)]}"/>
                                <field name="display_type" invisible="1"/>
                                <field name="name" widget="section_and_note_text" optional="show"/>
                                <field name="display_type" invisible="1"/>
                                <field name="quantity" attrs="{'required': [('display_type', '=', False)]}"/>
                                <field name="product_uom" attrs="{'required': [('display_type', '=', False)]}"/>
                                <field name="analytic_account_id" options="{'no_open': True, 'no_create': True}" groups="analytic.group_analytic_accounting" invisible="1"/>
                                <field name="is_invoice" invisible="1"/>
                                <field name='custom_invoice_id' invisible="1"/>
                                <field name='custom_invoice_line_id' invisible="1"/>
                            </tree>
                        </field>
                    </page>
                </xpath>
            </field>
        </record>
        <record id="project_task_view_search_inherit" model="ir.ui.view">
            <field name="name">project.task.view.search.inherit</field>
            <field name="model">project.task</field>
            <field name="inherit_id" ref="project.view_task_search_form"/>
            <field name="arch" type="xml">
                <xpath expr="//search/group" position="inside">
                    <filter string="Fecha de ejecución" name="fecha_creación" domain="[]" context="{'group_by': 'fecha_creacion'}"/>
                </xpath>
            </field>
        </record>

          <record id="timesheet_view_tree_user_inherit" model="ir.ui.view">
            <field name="name">hr_timesheet.timesheet_view_tree_user.inherit</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="hr_timesheet.hr_timesheet_line_search"/>
            <field name="arch" type="xml">
                <xpath expr="//search/group" position="inside">
                    <filter string="Cliente" name="groupby_cliente" domain="[]" context="{'group_by': 'cliente'}"/>
                </xpath>
            </field>
        </record>
        <!--AÑADIMOS EL CLIENTE DE LA TAREA AL PARTE DE HORAS-->
        <record id="account_analytic_line_tree_hr_timesheet_inherit" model="ir.ui.view">
            <field name="name">account.analytic.line.tree.hr_timesheet.inherit</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="hr_timesheet.timesheet_view_tree_user"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='task_id']" position="after">
                    <field name="cliente"/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>